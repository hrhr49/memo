<!doctype html><html lang=ja-jp><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=5"><title>Coc-Pyrightを使ってVimでのPythonの入力補完 | hrhr49 blog</title><meta name=description content="coc-pyrightのメモ 概要 Vim用のプラグインであるcoc.nvimの拡張機能。 Pythonの静的解析ツールであるPyrightをco"><meta name=generator content="Hugo 0.74.2"><link rel=canonical href=https://hrhr49.github.io/memo/posts/coc-pyright/><link rel=stylesheet href=https://hrhr49.github.io/memo//css/style.css><link rel=stylesheet href=https://hrhr49.github.io/memo//css/syntax.css><link rel=stylesheet href=https://hrhr49.github.io/memo//css/custom.css></head><body><header class=container><div class=row><a href=https://hrhr49.github.io/memo/><h1 class=logo>hrhr49 blog</h1></a></div><div class=row><ul><li style=display:inline-block;padding:5px><a href=/memo/categories/>Categories</a></li><li style=display:inline-block;padding:5px><a href=/memo/search/>Search</a></li><li style=display:inline-block;padding:5px><a href=/memo/tags/>Tags</a></li></ul></div></header><div id=content><div class=container><div class="post paper"><h1 class=page-title>Coc-Pyrightを使ってVimでのPythonの入力補完</h1><div class=date>2020-11-29
<a class=tags href=/memo/tags/vim/>vim</a>
<a class=tags href=/memo/tags/python/>python</a></div><p><a href=https://github.com/fannheyward/coc-pyright>coc-pyright</a>のメモ</p><h2 id=概要>概要</h2><p>Vim用のプラグインであるcoc.nvimの拡張機能。
Pythonの静的解析ツールであるPyrightをcoc.nvimで使えるようにしたやつ。</p><h2 id=インストール>インストール</h2><p>基本的な使い方は公式リポジトリの説明を参照</p><p><a href=https://github.com/fannheyward/coc-pyright>https://github.com/fannheyward/coc-pyright</a></p><h2 id=設定>設定</h2><p><code>pyrightconfig.json</code>をプロジェクトのルートに配置する。
グローバルで共通設定を用意することはできないっぽい？</p><p>PipenvやPoetryなどでの仮想環境化でも入力補完できるようにするために
設定が必要だったのでメモする。</p><p>私の環境の場合、以下の環境変数によって、仮想環境をプロジェクトのルートに<code>.venv</code>ディレクトリとして配置するようにしている。</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln>1</span><span class=c1># pipenvの仮想環境の場所をプロジェクト直下にする</span>
<span class=ln>2</span><span class=nb>export</span> <span class=nv>PIPENV_VENV_IN_PROJECT</span><span class=o>=</span><span class=nb>true</span>
<span class=ln>3</span>
<span class=ln>4</span><span class=c1># poetryの仮想環境の場所をプロジェクト直下にする</span>
<span class=ln>5</span><span class=nb>export</span> <span class=nv>POETRY_VIRTUALENVS_IN_PROJECT</span><span class=o>=</span><span class=nb>true</span>
</code></pre></div><p>したがって、この環境に対応するため、<code>pyrightconfig.json</code>に以下の内容を入れておく必要がある。</p><div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=ln>1</span><span class=p>{</span>
<span class=ln>2</span>    <span class=nt>&#34;venvPath&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
<span class=ln>3</span>    <span class=nt>&#34;venv&#34;</span><span class=p>:</span> <span class=s2>&#34;.venv&#34;</span>
<span class=ln>4</span><span class=p>}</span>
</code></pre></div><p>このとき、各設定の詳細は以下の通り</p><ul><li><p><code>venvPath</code> : 仮想環境たちを入れておくためのディレクトリ。
といっても今回の場合は、プロジェクトのルートにひとつだけ仮想環境があるだけ。そのため <code>""</code> にしている。
ちなみに、この行自体を削除してしまうとうまく行かなかった。</p></li><li><p><code>venv</code> : 仮想環境の名前。つまり仮想環境が入っているディレクトリ名。今回の場合は<code>.venv</code>というディレクトリが対応する。</p></li></ul><br>Categories:</div></div></div><hr><footer class=container><div class=copyright>Copyright © hrhr49; all rights reserved.</div></footer></body></html>